<!--
  Generated template for the Chats page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="amethyst">
    <ion-title align="center">Chat</ion-title>
  </ion-navbar>

</ion-header>



<ion-content>

	<ion-fab top right edge [ngSwitch]="chatType" >
    	<button ion-fab color="amethyst-reverse" *ngSwitchCase="'groups'" (click)="goToGroupAddPage()"><ion-icon name="add"></ion-icon></button>
	</ion-fab>

	<ion-toolbar color="amethyst-reverse">
	<div>
  		<ion-segment [(ngModel)]="chatType">
    		<ion-segment-button value="groups">
      		Groups
    		</ion-segment-button>
    		
    		<ion-segment-button value="people">
      		People
    		</ion-segment-button>
  		</ion-segment>
	</div>
	</ion-toolbar>

	<div [ngSwitch]="chatType">
  		<ion-list *ngSwitchCase="'groups'">

  			<ion-searchbar
  			[(ngModel)]="groupSearch"
  			[showCancelButton]="shouldShowCancel"
  			(ionInput)="searchGroup($event)"
  			(ionCancel)="onCancel($event)">
			</ion-searchbar>

    		
  				<ion-item color = "amethyst-reverse" detail-push *ngFor="let group of groups | async" (click)="goToGroupChat(group)">
    				<ion-avatar item-left>
      					<img src={{group.groupphoto}}>
    				</ion-avatar>
    					<h2>{{group.groupname}}</h2>
  				</ion-item>
			

  		</ion-list>

  		<ion-list *ngSwitchCase="'people'">

  			<ion-searchbar>
  			[(ngModel)]="peopleSearch"
  			[showCancelButton]="shouldShowCancel"
  			(ionInput)="searchPeople($event)"
  			(ionCancel)="onCancel($event)">
			</ion-searchbar>

  				<ion-item color = "amethyst-reverse" detail-push *ngFor="let person of people | async" (click)="goToPersonChat(person)">
    				<ion-avatar item-left>
      					<img src={{person.photoURL}}>
    				</ion-avatar>
    					<h2>{{person.firstname}} {{person.lastname}}</h2>
  				</ion-item>

  		</ion-list>
	</div>
	
</ion-content>
